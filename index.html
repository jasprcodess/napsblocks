<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NapsBlocks</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        *, *::before, *::after {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #1b1b1b;
            --bg-secondary: #232323;
            --bg-card: #2a2a2a;
            --bg-card-hover: #313131;
            --bg-sidebar: #1e1e1e;
            --bg-navbar: #1e1e1e;
            --bg-input: #353535;
            --border-color: #333333;
            --border-subtle: #2e2e2e;
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0a0;
            --text-muted: #6b6b6b;
            --accent-green: #00b06f;
            --accent-green-hover: #00c97e;
            --accent-blue: #3a8fdb;
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --sidebar-width: 68px;
            --navbar-height: 56px;
            --shadow-card: 0 1px 4px rgba(0,0,0,0.3);
            --shadow-card-hover: 0 4px 16px rgba(0,0,0,0.4);
        }

        html, body {
            height: 100%;
            overflow: hidden;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
        }

        /* ===== SCROLLBAR ===== */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 3px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* ===== NAVBAR ===== */
        .navbar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: var(--navbar-height);
            background: var(--bg-navbar);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            padding: 0 20px;
            z-index: 100;
            gap: 16px;
        }

        .navbar-logo {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
            cursor: pointer;
            padding-left: 4px;
        }

        .navbar-logo svg {
            width: 28px;
            height: 28px;
        }

        .navbar-logo-text {
            font-size: 18px;
            font-weight: 700;
            letter-spacing: -0.3px;
            color: var(--text-primary);
        }

        .navbar-search {
            flex: 1;
            max-width: 420px;
            margin: 0 auto;
            position: relative;
        }

        .navbar-search input {
            width: 100%;
            height: 36px;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 0 16px 0 40px;
            font-size: 13px;
            font-family: inherit;
            color: var(--text-primary);
            outline: none;
            transition: border-color 0.15s, background 0.15s;
        }

        .navbar-search input::placeholder {
            color: var(--text-muted);
        }

        .navbar-search input:focus {
            border-color: #505050;
            background: #3a3a3a;
        }

        .navbar-search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            pointer-events: none;
        }

        .navbar-search-icon svg {
            width: 16px;
            height: 16px;
        }

        .navbar-actions {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
        }

        .navbar-btn {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-secondary);
            transition: background 0.15s, color 0.15s;
        }

        .navbar-btn:hover {
            background: var(--bg-card-hover);
            color: var(--text-primary);
        }

        .navbar-btn svg {
            width: 18px;
            height: 18px;
        }

        .navbar-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #444, #666);
            border: 2px solid var(--border-color);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-secondary);
            transition: border-color 0.15s;
        }

        .navbar-avatar:hover {
            border-color: #555;
        }

        /* ===== SIDEBAR ===== */
        .sidebar {
            position: fixed;
            top: var(--navbar-height);
            left: 0;
            bottom: 0;
            width: var(--sidebar-width);
            background: var(--bg-sidebar);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 12px;
            gap: 4px;
            z-index: 90;
        }

        .sidebar-item {
            width: 48px;
            height: 48px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 2px;
            border-radius: var(--radius-md);
            cursor: pointer;
            color: var(--text-muted);
            transition: background 0.15s, color 0.15s;
            text-decoration: none;
            position: relative;
        }

        .sidebar-item:hover {
            background: #2a2a2a;
            color: var(--text-secondary);
        }

        .sidebar-item.active {
            color: var(--text-primary);
            background: #2a2a2a;
        }

        .sidebar-item.active::before {
            content: '';
            position: absolute;
            left: -10px;
            top: 50%;
            transform: translateY(-50%);
            width: 3px;
            height: 24px;
            background: var(--text-primary);
            border-radius: 0 2px 2px 0;
        }

        .sidebar-item svg {
            width: 22px;
            height: 22px;
        }

        .sidebar-label {
            font-size: 9px;
            font-weight: 500;
            letter-spacing: 0.02em;
        }

        .sidebar-divider {
            width: 32px;
            height: 1px;
            background: var(--border-color);
            margin: 6px 0;
        }

        /* ===== AVATAR PAGE ===== */
        #avatar-page {
            display: none;
            position: fixed;
            top: var(--navbar-height);
            left: var(--sidebar-width);
            right: 0;
            bottom: 0;
            background: var(--bg-primary);
            z-index: 50;
            overflow: hidden;
        }

        .avatar-page-layout {
            display: flex;
            height: 100%;
        }

        .avatar-preview-side {
            flex: 1;
            min-width: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: #222;
            position: relative;
        }

        #avatar-preview-container {
            width: 100%;
            height: 100%;
        }

        #avatar-preview-container canvas {
            display: block;
            width: 100%;
            height: 100%;
        }

        .avatar-preview-label {
            position: absolute;
            bottom: 16px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.5);
            color: #aaa;
            padding: 6px 16px;
            border-radius: 16px;
            font-size: 11px;
            font-weight: 500;
            backdrop-filter: blur(4px);
            pointer-events: none;
        }

        .avatar-editor-side {
            width: 380px;
            flex-shrink: 0;
            background: var(--bg-secondary);
            border-left: 1px solid var(--border-color);
            overflow-y: auto;
            overflow-x: hidden;
            padding: 24px 20px 40px;
        }

        .avatar-editor-title {
            font-size: 22px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .avatar-editor-subtitle {
            font-size: 13px;
            color: var(--text-muted);
            margin-bottom: 20px;
        }

        .avatar-page-back {
            position: absolute;
            top: 16px;
            left: 16px;
            z-index: 10;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(30,30,30,0.85);
            backdrop-filter: blur(8px);
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-primary);
            transition: background 0.15s;
        }

        .avatar-page-back:hover {
            background: rgba(50,50,50,0.9);
        }

        .avatar-page-back svg {
            width: 20px;
            height: 20px;
        }

        /* ===== CATALOG PAGE ===== */
        #catalog-page {
            display: none;
            position: fixed;
            top: var(--navbar-height);
            left: var(--sidebar-width);
            right: 0;
            bottom: 0;
            background: var(--bg-primary);
            z-index: 50;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 24px 28px 40px;
        }

        .catalog-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
        }

        .catalog-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .catalog-subtitle {
            font-size: 13px;
            color: var(--text-muted);
        }

        .catalog-tabs {
            display: flex;
            gap: 6px;
            margin-bottom: 20px;
        }

        .catalog-tab {
            padding: 8px 18px;
            border-radius: 20px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.15s, color 0.15s;
        }

        .catalog-tab:hover {
            background: var(--bg-card-hover);
            color: var(--text-primary);
        }

        .catalog-tab.active {
            background: rgba(74,158,255,0.15);
            border-color: #4a9eff;
            color: #4a9eff;
        }

        @media (max-width: 900px) {
            .avatar-editor-side {
                width: 320px;
            }
        }

        @media (max-width: 640px) {
            .avatar-page-layout {
                flex-direction: column;
            }
            .avatar-preview-side {
                height: 40vh;
            }
            .avatar-editor-side {
                width: 100%;
            }
            #avatar-page {
                left: 0;
            }
            #catalog-page {
                left: 0;
            }
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            margin-left: var(--sidebar-width);
            margin-top: var(--navbar-height);
            height: calc(100vh - var(--navbar-height));
            overflow-y: auto;
            overflow-x: hidden;
            padding: 24px 28px 40px 28px;
        }

        /* ===== SECTION ROWS ===== */
        .section-row {
            margin-bottom: 32px;
        }

        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 14px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 700;
            letter-spacing: -0.3px;
            color: var(--text-primary);
        }

        .section-see-all {
            font-size: 12px;
            font-weight: 600;
            color: var(--text-muted);
            cursor: pointer;
            padding: 6px 12px;
            border-radius: var(--radius-sm);
            transition: background 0.15s, color 0.15s;
        }

        .section-see-all:hover {
            background: var(--bg-card);
            color: var(--text-secondary);
        }

        .game-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 16px;
        }

        /* ===== GAME CARD ===== */
        .game-card {
            background: var(--bg-card);
            border-radius: var(--radius-md);
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s;
            box-shadow: var(--shadow-card);
            border: 1px solid var(--border-subtle);
        }

        .game-card:hover {
            transform: scale(1.02);
            box-shadow: var(--shadow-card-hover);
            background: var(--bg-card-hover);
            border-color: #3a3a3a;
        }

        .game-card-thumbnail {
            width: 100%;
            aspect-ratio: 16 / 9;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            position: relative;
            overflow: hidden;
        }

        .game-card-thumbnail::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, transparent 60%, rgba(0,0,0,0.3) 100%);
        }

        .game-card-info {
            padding: 10px 12px 12px;
        }

        .game-card-title {
            font-size: 13px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 6px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            line-height: 1.3;
        }

        .game-card-stats {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 11px;
            color: var(--text-muted);
        }

        .game-card-stat {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .game-card-stat svg {
            width: 12px;
            height: 12px;
            flex-shrink: 0;
        }

        .stat-like {
            color: #6bc76b;
        }

        .stat-players {
            color: var(--text-muted);
        }

        /* Thumbnail gradients */
        .thumb-obby { background: linear-gradient(135deg, #4a6cf7, #9b59b6); }
        .thumb-tycoon { background: linear-gradient(135deg, #2ecc71, #27ae60); }
        .thumb-simulator { background: linear-gradient(135deg, #f39c12, #e67e22); }
        .thumb-brainrot { background: linear-gradient(135deg, #e74c3c, #e91e8a); }
        .thumb-battlegrounds { background: linear-gradient(135deg, #8b0000, #1a1a2e); }
        .thumb-racing { background: linear-gradient(135deg, #2980b9, #00d2ff); }
        .thumb-npcworld { background: linear-gradient(135deg, #1abc9c, #2ecc71); }
        .thumb-aizone { background: linear-gradient(135deg, #9b59b6, #3498db); }

        /* ===== GAME DETAIL PAGE ===== */
        #game-detail {
            display: none;
            position: fixed;
            top: var(--navbar-height);
            left: var(--sidebar-width);
            right: 0;
            bottom: 0;
            background: var(--bg-primary);
            z-index: 50;
            overflow-y: auto;
            overflow-x: hidden;
        }

        .detail-banner {
            width: 100%;
            aspect-ratio: 21 / 7;
            max-height: 320px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 96px;
            position: relative;
            overflow: hidden;
        }

        .detail-banner::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(180deg, transparent 40%, var(--bg-primary) 100%);
        }

        .detail-body {
            padding: 0 36px 48px;
            max-width: 960px;
            position: relative;
            z-index: 1;
            margin-top: -32px;
        }

        .detail-top-row {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            margin-bottom: 24px;
        }

        .detail-thumb {
            width: 120px;
            height: 120px;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 52px;
            flex-shrink: 0;
            border: 3px solid var(--bg-primary);
            box-shadow: 0 4px 20px rgba(0,0,0,0.5);
        }

        .detail-title-area {
            flex: 1;
            padding-top: 8px;
        }

        .detail-title {
            font-size: 28px;
            font-weight: 700;
            letter-spacing: -0.5px;
            margin-bottom: 4px;
        }

        .detail-creator {
            font-size: 14px;
            color: var(--text-secondary);
            margin-bottom: 16px;
        }

        .detail-creator span {
            color: var(--accent-blue);
            cursor: pointer;
        }

        .detail-creator span:hover {
            text-decoration: underline;
        }

        .detail-actions {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .btn-play {
            height: 44px;
            padding: 0 40px;
            background: var(--accent-green);
            color: #fff;
            border: none;
            border-radius: var(--radius-md);
            font-family: inherit;
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            letter-spacing: 0.3px;
            transition: background 0.15s, transform 0.1s;
            box-shadow: 0 2px 8px rgba(0,176,111,0.3);
        }

        .btn-play:hover {
            background: var(--accent-green-hover);
        }

        .btn-play:active {
            transform: scale(0.97);
        }

        .btn-play svg {
            width: 18px;
            height: 18px;
        }

        .btn-secondary {
            height: 44px;
            width: 44px;
            background: var(--bg-card);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.15s, color 0.15s;
        }

        .btn-secondary:hover {
            background: var(--bg-card-hover);
            color: var(--text-primary);
        }

        .btn-secondary svg {
            width: 20px;
            height: 20px;
        }

        .detail-stats-bar {
            display: flex;
            align-items: center;
            gap: 24px;
            padding: 16px 0;
            border-top: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 24px;
        }

        .detail-stat-item {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .detail-stat-value {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .detail-stat-label {
            font-size: 11px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            font-weight: 500;
        }

        .detail-stat-divider {
            width: 1px;
            height: 32px;
            background: var(--border-color);
        }

        .detail-section {
            margin-bottom: 24px;
        }

        .detail-section-title {
            font-size: 16px;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--text-primary);
        }

        .detail-description {
            font-size: 14px;
            line-height: 1.6;
            color: var(--text-secondary);
        }

        .detail-back-btn {
            position: absolute;
            top: 16px;
            left: 16px;
            z-index: 10;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(30,30,30,0.85);
            backdrop-filter: blur(8px);
            border: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-primary);
            transition: background 0.15s;
        }

        .detail-back-btn:hover {
            background: rgba(50,50,50,0.9);
        }

        .detail-back-btn svg {
            width: 20px;
            height: 20px;
        }

        .detail-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .detail-tag {
            padding: 6px 14px;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
            color: var(--text-secondary);
        }

        /* ===== GAME CONTAINER (3D canvas) ===== */
        #game-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 200;
        }

        #game-container canvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* ===== IN-GAME UI ===== */
        #game-ui {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 210;
            pointer-events: none;
        }

        .game-ui-topbar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 36px;
            background: rgba(0,0,0,0.6);
            display: flex;
            align-items: center;
            padding: 0 12px;
            pointer-events: auto;
        }

        .game-ui-menu-btn {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.1);
            border: none;
            border-radius: var(--radius-sm);
            cursor: pointer;
            color: #fff;
            transition: background 0.15s;
        }

        .game-ui-menu-btn:hover {
            background: rgba(255,255,255,0.2);
        }

        .game-ui-menu-btn svg {
            width: 16px;
            height: 16px;
        }

        .game-ui-chat {
            position: absolute;
            bottom: 12px;
            left: 12px;
            width: 280px;
            pointer-events: auto;
        }

        .game-ui-chat-log {
            max-height: 140px;
            overflow-y: auto;
            margin-bottom: 6px;
            font-size: 12px;
            color: rgba(255,255,255,0.8);
            text-shadow: 0 1px 3px rgba(0,0,0,0.8);
        }

        .game-ui-chat-input {
            width: 100%;
            height: 30px;
            background: rgba(0,0,0,0.55);
            border: 1px solid rgba(255,255,255,0.15);
            border-radius: var(--radius-sm);
            padding: 0 10px;
            font-family: inherit;
            font-size: 12px;
            color: #fff;
            outline: none;
        }

        .game-ui-chat-input::placeholder {
            color: rgba(255,255,255,0.35);
        }

        .game-ui-playerlist {
            position: absolute;
            top: 48px;
            right: 12px;
            width: 180px;
            background: rgba(0,0,0,0.55);
            border-radius: var(--radius-md);
            padding: 8px 0;
            pointer-events: auto;
        }

        .game-ui-playerlist-title {
            padding: 4px 12px 8px;
            font-size: 11px;
            font-weight: 700;
            color: rgba(255,255,255,0.5);
            text-transform: uppercase;
            letter-spacing: 0.06em;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .game-ui-player {
            padding: 6px 12px;
            font-size: 12px;
            color: rgba(255,255,255,0.85);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .game-ui-player-dot {
            width: 6px;
            height: 6px;
            background: var(--accent-green);
            border-radius: 50%;
        }

        /* ===== PAUSE / ESC MENU ===== */
        #pause-menu {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 300;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(6px);
            align-items: center;
            justify-content: center;
        }

        .pause-menu-box {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 32px 40px;
            min-width: 320px;
            text-align: center;
            box-shadow: 0 16px 48px rgba(0,0,0,0.6);
        }

        .pause-menu-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .pause-menu-game-name {
            font-size: 13px;
            color: var(--text-muted);
            margin-bottom: 28px;
        }

        .pause-menu-btns {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .pause-btn {
            height: 44px;
            border-radius: var(--radius-md);
            font-family: inherit;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: background 0.15s, transform 0.1s;
        }

        .pause-btn:active {
            transform: scale(0.97);
        }

        .pause-btn-resume {
            background: var(--accent-green);
            color: #fff;
        }

        .pause-btn-resume:hover {
            background: var(--accent-green-hover);
        }

        .pause-btn-leave {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            color: var(--text-primary);
        }

        .pause-btn-leave:hover {
            background: var(--bg-card-hover);
        }

        /* ===== LOADING SCREEN ===== */
        #loading-screen {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 250;
            background: #111;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 20px;
        }

        .loading-logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .loading-bar-track {
            width: 260px;
            height: 4px;
            background: #333;
            border-radius: 2px;
            overflow: hidden;
        }

        .loading-bar-fill {
            width: 0%;
            height: 100%;
            background: var(--accent-green);
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .loading-text {
            font-size: 12px;
            color: var(--text-muted);
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 900px) {
            .game-grid {
                grid-template-columns: repeat(auto-fill, minmax(155px, 1fr));
                gap: 12px;
            }
        }

        @media (max-width: 640px) {
            .sidebar {
                display: none;
            }
            .main-content {
                margin-left: 0;
                padding: 20px 16px 40px;
            }
            #game-detail {
                left: 0;
            }
            .game-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 10px;
            }
            .navbar-search {
                max-width: 240px;
            }
        }
    </style>
</head>
<body>

    <!-- ===== NAVBAR ===== -->
    <nav class="navbar">
        <div class="navbar-logo" id="navbar-logo">
            <svg viewBox="0 0 28 28" fill="none">
                <rect x="2" y="2" width="10" height="10" rx="2" fill="#e0e0e0"/>
                <rect x="16" y="2" width="10" height="10" rx="2" fill="#a0a0a0"/>
                <rect x="2" y="16" width="10" height="10" rx="2" fill="#a0a0a0"/>
                <rect x="16" y="16" width="10" height="10" rx="2" fill="#e0e0e0"/>
            </svg>
            <span class="navbar-logo-text">NapsBlocks</span>
        </div>

        <div class="navbar-search">
            <span class="navbar-search-icon">
                <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round">
                    <circle cx="7" cy="7" r="5"/>
                    <line x1="11" y1="11" x2="14.5" y2="14.5"/>
                </svg>
            </span>
            <input type="text" placeholder="Search games" id="search-input">
        </div>

        <div class="navbar-actions">
            <!-- Notification bell -->
            <button class="navbar-btn" title="Notifications">
                <svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M10 2a5 5 0 0 0-5 5v3l-1.5 2.5h13L15 10V7a5 5 0 0 0-5-5z"/>
                    <path d="M8.5 16.5a1.5 1.5 0 0 0 3 0"/>
                </svg>
            </button>
            <!-- Avatar -->
            <div class="navbar-avatar">N</div>
        </div>
    </nav>

    <!-- ===== SIDEBAR ===== -->
    <aside class="sidebar">
        <a class="sidebar-item active" data-page="home" title="Home">
            <svg viewBox="0 0 22 22" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <path d="M3 10.5L11 3l8 7.5"/>
                <path d="M5 9.5V18a1 1 0 0 0 1 1h3.5v-4.5a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1V19H16a1 1 0 0 0 1-1V9.5"/>
            </svg>
            <span class="sidebar-label">Home</span>
        </a>
        <a class="sidebar-item" data-page="profile" title="Profile">
            <svg viewBox="0 0 22 22" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="11" cy="8" r="4"/>
                <path d="M4 19c0-3.3 3.1-6 7-6s7 2.7 7 6"/>
            </svg>
            <span class="sidebar-label">Profile</span>
        </a>

        <div class="sidebar-divider"></div>

        <a class="sidebar-item" data-page="games" title="Games">
            <svg viewBox="0 0 22 22" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <rect x="2" y="5" width="18" height="13" rx="3"/>
                <circle cx="14.5" cy="10" r="1.2" fill="currentColor"/>
                <circle cx="17" cy="12.5" r="1.2" fill="currentColor"/>
                <line x1="5.5" y1="10" x2="9.5" y2="10"/>
                <line x1="7.5" y1="8" x2="7.5" y2="12"/>
            </svg>
            <span class="sidebar-label">Games</span>
        </a>
        <a class="sidebar-item" data-page="avatar" title="Avatar">
            <svg viewBox="0 0 22 22" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="11" cy="7" r="4"/>
                <path d="M4 19c0-3.3 3.1-6 7-6s7 2.7 7 6"/>
                <path d="M11 3v-1M8 4.5L7 3.5M14 4.5l1-1"/>
            </svg>
            <span class="sidebar-label">Avatar</span>
        </a>
        <a class="sidebar-item" data-page="catalog" title="Catalog">
            <svg viewBox="0 0 22 22" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="3" width="7" height="7" rx="1.5"/>
                <rect x="12" y="3" width="7" height="7" rx="1.5"/>
                <rect x="3" y="12" width="7" height="7" rx="1.5"/>
                <rect x="12" y="12" width="7" height="7" rx="1.5"/>
            </svg>
            <span class="sidebar-label">Catalog</span>
        </a>

        <div class="sidebar-divider"></div>

        <a class="sidebar-item" data-page="settings" title="Settings">
            <svg viewBox="0 0 22 22" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="11" cy="11" r="3"/>
                <path d="M11 2v2m0 14v2M2 11h2m14 0h2M4.22 4.22l1.42 1.42m10.72 10.72l1.42 1.42M4.22 17.78l1.42-1.42M16.36 5.64l1.42-1.42"/>
            </svg>
            <span class="sidebar-label">Settings</span>
        </a>
    </aside>

    <!-- ===== MAIN CONTENT (Homepage) ===== -->
    <main class="main-content" id="homepage">

        <!-- Top Trending -->
        <div class="section-row">
            <div class="section-header">
                <h2 class="section-title">Top Trending</h2>
                <span class="section-see-all">See All</span>
            </div>
            <div class="game-grid">
                <!-- Steal a Brainrot -->
                <div class="game-card" data-game-id="brainrot" data-title="Steal a Brainrot" data-emoji="&#129504;" data-creator="@NapsStudio" data-like="94" data-players="50.3K" data-desc="Steal brainrots and escape!" data-thumb="thumb-brainrot" data-genre="Adventure" data-maxplayers="30" data-created="Jan 2025" data-updated="Feb 2026">
                    <div class="game-card-thumbnail thumb-brainrot">&#129504;</div>
                    <div class="game-card-info">
                        <div class="game-card-title">Steal a Brainrot</div>
                        <div class="game-card-stats">
                            <span class="game-card-stat stat-like">
                                <svg viewBox="0 0 12 12" fill="currentColor"><path d="M2 5.5l3.5 4L10 2" stroke="currentColor" stroke-width="1.8" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                94%
                            </span>
                            <span class="game-card-stat stat-players">
                                <svg viewBox="0 0 12 12" fill="currentColor"><circle cx="6" cy="4" r="2.5" fill="none" stroke="currentColor" stroke-width="1.2"/><path d="M1.5 11c0-2.2 2-4 4.5-4s4.5 1.8 4.5 4" fill="none" stroke="currentColor" stroke-width="1.2"/></svg>
                                50.3K
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Click Simulator -->
                <div class="game-card" data-game-id="simulator" data-title="Click Simulator" data-emoji="&#9757;" data-creator="@NapsStudio" data-like="82" data-players="15.2K" data-desc="Click to become the strongest!" data-thumb="thumb-simulator" data-genre="Simulator" data-maxplayers="20" data-created="Mar 2025" data-updated="Jan 2026">
                    <div class="game-card-thumbnail thumb-simulator">&#128070;</div>
                    <div class="game-card-info">
                        <div class="game-card-title">Click Simulator</div>
                        <div class="game-card-stats">
                            <span class="game-card-stat stat-like">
                                <svg viewBox="0 0 12 12" fill="currentColor"><path d="M2 5.5l3.5 4L10 2" stroke="currentColor" stroke-width="1.8" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                82%
                            </span>
                            <span class="game-card-stat stat-players">
                                <svg viewBox="0 0 12 12" fill="currentColor"><circle cx="6" cy="4" r="2.5" fill="none" stroke="currentColor" stroke-width="1.2"/><path d="M1.5 11c0-2.2 2-4 4.5-4s4.5 1.8 4.5 4" fill="none" stroke="currentColor" stroke-width="1.2"/></svg>
                                15.2K
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Super Fun Obby -->
                <div class="game-card" data-game-id="obby" data-title="Super Fun Obby" data-emoji="&#127939;" data-creator="@NapsStudio" data-like="95" data-players="12.4K" data-desc="Jump through challenging obstacles!" data-thumb="thumb-obby" data-genre="Obby" data-maxplayers="25" data-created="Dec 2024" data-updated="Feb 2026">
                    <div class="game-card-thumbnail thumb-obby">&#127939;</div>
                    <div class="game-card-info">
                        <div class="game-card-title">Super Fun Obby</div>
                        <div class="game-card-stats">
                            <span class="game-card-stat stat-like">
                                <svg viewBox="0 0 12 12" fill="currentColor"><path d="M2 5.5l3.5 4L10 2" stroke="currentColor" stroke-width="1.8" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                95%
                            </span>
                            <span class="game-card-stat stat-players">
                                <svg viewBox="0 0 12 12" fill="currentColor"><circle cx="6" cy="4" r="2.5" fill="none" stroke="currentColor" stroke-width="1.2"/><path d="M1.5 11c0-2.2 2-4 4.5-4s4.5 1.8 4.5 4" fill="none" stroke="currentColor" stroke-width="1.2"/></svg>
                                12.4K
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recommended For You -->
        <div class="section-row">
            <div class="section-header">
                <h2 class="section-title">Recommended For You</h2>
                <span class="section-see-all">See All</span>
            </div>
            <div class="game-grid">
                <!-- Battlegrounds -->
                <div class="game-card" data-game-id="battlegrounds" data-title="Battlegrounds" data-emoji="&#128299;" data-creator="@NapsStudio" data-like="91" data-players="6.1K" data-desc="Fight to be the last one standing!" data-thumb="thumb-battlegrounds" data-genre="Fighting" data-maxplayers="50" data-created="Jun 2025" data-updated="Feb 2026">
                    <div class="game-card-thumbnail thumb-battlegrounds">&#128299;</div>
                    <div class="game-card-info">
                        <div class="game-card-title">Battlegrounds</div>
                        <div class="game-card-stats">
                            <span class="game-card-stat stat-like">
                                <svg viewBox="0 0 12 12" fill="currentColor"><path d="M2 5.5l3.5 4L10 2" stroke="currentColor" stroke-width="1.8" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                91%
                            </span>
                            <span class="game-card-stat stat-players">
                                <svg viewBox="0 0 12 12" fill="currentColor"><circle cx="6" cy="4" r="2.5" fill="none" stroke="currentColor" stroke-width="1.2"/><path d="M1.5 11c0-2.2 2-4 4.5-4s4.5 1.8 4.5 4" fill="none" stroke="currentColor" stroke-width="1.2"/></svg>
                                6.1K
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Tycoon Empire -->
                <div class="game-card" data-game-id="tycoon" data-title="Tycoon Empire" data-emoji="&#127981;" data-creator="@NapsStudio" data-like="89" data-players="8.7K" data-desc="Build your empire from scratch!" data-thumb="thumb-tycoon" data-genre="Tycoon" data-maxplayers="15" data-created="Feb 2025" data-updated="Jan 2026">
                    <div class="game-card-thumbnail thumb-tycoon">&#127981;</div>
                    <div class="game-card-info">
                        <div class="game-card-title">Tycoon Empire</div>
                        <div class="game-card-stats">
                            <span class="game-card-stat stat-like">
                                <svg viewBox="0 0 12 12" fill="currentColor"><path d="M2 5.5l3.5 4L10 2" stroke="currentColor" stroke-width="1.8" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                89%
                            </span>
                            <span class="game-card-stat stat-players">
                                <svg viewBox="0 0 12 12" fill="currentColor"><circle cx="6" cy="4" r="2.5" fill="none" stroke="currentColor" stroke-width="1.2"/><path d="M1.5 11c0-2.2 2-4 4.5-4s4.5 1.8 4.5 4" fill="none" stroke="currentColor" stroke-width="1.2"/></svg>
                                8.7K
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Speed Racing -->
                <div class="game-card" data-game-id="racing" data-title="Speed Racing" data-emoji="&#127950;&#65039;" data-creator="@NapsStudio" data-like="87" data-players="4.2K" data-desc="Race supercars on epic tracks!" data-thumb="thumb-racing" data-genre="Racing" data-maxplayers="12" data-created="Aug 2025" data-updated="Feb 2026">
                    <div class="game-card-thumbnail thumb-racing">&#127950;&#65039;</div>
                    <div class="game-card-info">
                        <div class="game-card-title">Speed Racing</div>
                        <div class="game-card-stats">
                            <span class="game-card-stat stat-like">
                                <svg viewBox="0 0 12 12" fill="currentColor"><path d="M2 5.5l3.5 4L10 2" stroke="currentColor" stroke-width="1.8" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                87%
                            </span>
                            <span class="game-card-stat stat-players">
                                <svg viewBox="0 0 12 12" fill="currentColor"><circle cx="6" cy="4" r="2.5" fill="none" stroke="currentColor" stroke-width="1.2"/><path d="M1.5 11c0-2.2 2-4 4.5-4s4.5 1.8 4.5 4" fill="none" stroke="currentColor" stroke-width="1.2"/></svg>
                                4.2K
                            </span>
                        </div>
                    </div>
                </div>

                <!-- AI Zone -->
                <div class="game-card" data-game-id="aizone" data-title="AI Zone" data-emoji="&#129302;" data-creator="@NapsStudio" data-like="96" data-players="7.8K" data-desc="Talk to AI-powered NPCs with unique personalities! Each one thinks and responds differently." data-thumb="thumb-aizone" data-genre="Social" data-maxplayers="1" data-created="Feb 2026" data-updated="Feb 2026">
                    <div class="game-card-thumbnail thumb-aizone">&#129302;</div>
                    <div class="game-card-info">
                        <div class="game-card-title">AI Zone</div>
                        <div class="game-card-stats">
                            <span class="game-card-stat stat-like">
                                <svg viewBox="0 0 12 12" fill="currentColor"><path d="M2 5.5l3.5 4L10 2" stroke="currentColor" stroke-width="1.8" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                96%
                            </span>
                            <span class="game-card-stat stat-players">
                                <svg viewBox="0 0 12 12" fill="currentColor"><circle cx="6" cy="4" r="2.5" fill="none" stroke="currentColor" stroke-width="1.2"/><path d="M1.5 11c0-2.2 2-4 4.5-4s4.5 1.8 4.5 4" fill="none" stroke="currentColor" stroke-width="1.2"/></svg>
                                7.8K
                            </span>
                        </div>
                    </div>
                </div>

                <!-- NPC World -->
                <div class="game-card" data-game-id="npcworld" data-title="NPC World" data-emoji="&#129489;" data-creator="@NapsStudio" data-like="88" data-players="3.5K" data-desc="Hang out with tons of NPCs walking around!" data-thumb="thumb-npcworld" data-genre="Social" data-maxplayers="30" data-created="Feb 2026" data-updated="Feb 2026">
                    <div class="game-card-thumbnail thumb-npcworld">&#129489;</div>
                    <div class="game-card-info">
                        <div class="game-card-title">NPC World</div>
                        <div class="game-card-stats">
                            <span class="game-card-stat stat-like">
                                <svg viewBox="0 0 12 12" fill="currentColor"><path d="M2 5.5l3.5 4L10 2" stroke="currentColor" stroke-width="1.8" fill="none" stroke-linecap="round" stroke-linejoin="round"/></svg>
                                88%
                            </span>
                            <span class="game-card-stat stat-players">
                                <svg viewBox="0 0 12 12" fill="currentColor"><circle cx="6" cy="4" r="2.5" fill="none" stroke="currentColor" stroke-width="1.2"/><path d="M1.5 11c0-2.2 2-4 4.5-4s4.5 1.8 4.5 4" fill="none" stroke="currentColor" stroke-width="1.2"/></svg>
                                3.5K
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- ===== GAME DETAIL PAGE ===== -->
    <section id="game-detail">
        <button class="detail-back-btn" id="detail-back-btn" title="Back">
            <svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="15" y1="10" x2="5" y2="10"/>
                <polyline points="10,5 5,10 10,15"/>
            </svg>
        </button>

        <div class="detail-banner" id="detail-banner"></div>

        <div class="detail-body">
            <div class="detail-top-row">
                <div class="detail-thumb" id="detail-thumb"></div>
                <div class="detail-title-area">
                    <h1 class="detail-title" id="detail-title"></h1>
                    <div class="detail-creator">By <span id="detail-creator"></span></div>
                    <div class="detail-actions">
                        <button class="btn-play" id="btn-play">
                            <svg viewBox="0 0 18 18" fill="currentColor"><polygon points="4,2 16,9 4,16"/></svg>
                            Play
                        </button>
                        <button class="btn-secondary" title="Favorite">
                            <svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.8">
                                <path d="M10 15.27L15.18 18l-1.36-5.73L18 8.24l-5.91-.51L10 2.5 7.91 7.73 2 8.24l4.18 3.99L4.82 18z"/>
                            </svg>
                        </button>
                        <button class="btn-secondary" title="Share">
                            <svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="15" cy="5" r="2.5"/>
                                <circle cx="5" cy="10" r="2.5"/>
                                <circle cx="15" cy="15" r="2.5"/>
                                <line x1="7.2" y1="8.9" x2="12.8" y2="6.1"/>
                                <line x1="7.2" y1="11.1" x2="12.8" y2="13.9"/>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <div class="detail-stats-bar">
                <div class="detail-stat-item">
                    <div class="detail-stat-value" id="detail-players"></div>
                    <div class="detail-stat-label">Active</div>
                </div>
                <div class="detail-stat-divider"></div>
                <div class="detail-stat-item">
                    <div class="detail-stat-value" id="detail-likes"></div>
                    <div class="detail-stat-label">Like Ratio</div>
                </div>
                <div class="detail-stat-divider"></div>
                <div class="detail-stat-item">
                    <div class="detail-stat-value" id="detail-maxplayers"></div>
                    <div class="detail-stat-label">Max Players</div>
                </div>
                <div class="detail-stat-divider"></div>
                <div class="detail-stat-item">
                    <div class="detail-stat-value" id="detail-genre"></div>
                    <div class="detail-stat-label">Genre</div>
                </div>
            </div>

            <div class="detail-section">
                <h3 class="detail-section-title">Description</h3>
                <p class="detail-description" id="detail-description"></p>
            </div>

            <div class="detail-section">
                <h3 class="detail-section-title">Tags</h3>
                <div class="detail-tags" id="detail-tags"></div>
            </div>

            <div class="detail-section">
                <h3 class="detail-section-title">Info</h3>
                <div class="detail-stats-bar" style="border-top:none;padding-top:0;">
                    <div class="detail-stat-item">
                        <div class="detail-stat-value" id="detail-created"></div>
                        <div class="detail-stat-label">Created</div>
                    </div>
                    <div class="detail-stat-divider"></div>
                    <div class="detail-stat-item">
                        <div class="detail-stat-value" id="detail-updated"></div>
                        <div class="detail-stat-label">Updated</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- ===== AVATAR EDITOR PAGE ===== -->
    <section id="avatar-page">
        <div class="avatar-page-layout">
            <div class="avatar-preview-side">
                <button class="avatar-page-back" id="avatar-back-btn" title="Back">
                    <svg viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="15" y1="10" x2="5" y2="10"/>
                        <polyline points="10,5 5,10 10,15"/>
                    </svg>
                </button>
                <div id="avatar-preview-container"></div>
                <div class="avatar-preview-label">Drag to rotate</div>
            </div>
            <div class="avatar-editor-side">
                <div class="avatar-editor-title">Avatar Editor</div>
                <div class="avatar-editor-subtitle">Customize your character</div>
                <div id="avatar-editor-panel"></div>
            </div>
        </div>
    </section>

    <!-- ===== CATALOG PAGE ===== -->
    <section id="catalog-page">
        <div class="catalog-header">
            <div>
                <div class="catalog-title">Catalog</div>
                <div class="catalog-subtitle">Browse and equip items for your avatar</div>
            </div>
        </div>
        <div id="catalog-content"></div>
    </section>

    <!-- ===== GAME CONTAINER (3D Canvas) ===== -->
    <div id="game-container"></div>

    <!-- ===== IN-GAME UI OVERLAY ===== -->
    <div id="game-ui">
        <div class="game-ui-topbar">
            <button class="game-ui-menu-btn" id="game-ui-menu-btn" title="Menu (ESC)">
                <svg viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                    <line x1="2" y1="4" x2="14" y2="4"/>
                    <line x1="2" y1="8" x2="14" y2="8"/>
                    <line x1="2" y1="12" x2="14" y2="12"/>
                </svg>
            </button>
        </div>
        <div class="game-ui-chat">
            <div class="game-ui-chat-log" id="chat-log"></div>
            <input class="game-ui-chat-input" id="chat-input" type="text" placeholder="Press / to chat...">
        </div>
        <div class="game-ui-playerlist">
            <div class="game-ui-playerlist-title">Players</div>
            <div class="game-ui-player"><span class="game-ui-player-dot"></span> You</div>
        </div>
    </div>

    <!-- ===== PAUSE / ESC MENU ===== -->
    <div id="pause-menu">
        <div class="pause-menu-box">
            <div class="pause-menu-title">Game Paused</div>
            <div class="pause-menu-game-name" id="pause-game-name"></div>
            <div class="pause-menu-btns">
                <button class="pause-btn pause-btn-resume" id="pause-resume">Resume</button>
                <button class="pause-btn pause-btn-leave" id="pause-leave">Leave Game</button>
            </div>
        </div>
    </div>

    <!-- ===== LOADING SCREEN ===== -->
    <div id="loading-screen">
        <div class="loading-logo">NapsBlocks</div>
        <div class="loading-bar-track">
            <div class="loading-bar-fill" id="loading-bar-fill"></div>
        </div>
        <div class="loading-text" id="loading-text">Loading game...</div>
    </div>

    <!-- ===== SCRIPTS ===== -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="app.js"></script>
    <!-- Preload all game scripts so they register immediately -->
    <script src="games/obby.js"></script>
    <script src="games/tycoon.js"></script>
    <script src="games/simulator.js"></script>
    <script src="games/brainrot.js"></script>
    <script src="games/battlegrounds.js"></script>
    <script src="games/racing.js"></script>
    <script src="games/npcworld.js"></script>
    <script src="games/aizone.js"></script>
</body>
</html>
